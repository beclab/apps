metadata:
  description: Olares 提供的 MongoDB 中间件
  title: MongoDB 6.0

spec:
  fullDescription: |
    MongoDB 是一款流行的文档型 NoSQL 数据库，主要用于数据存储和检索。该数据库专为现代应用提供高扩展性、灵活性和卓越性能。

     这个 MongoDB 中间件基于 Percona Server for MongoDB 版本。它是个高度可扩展的数据库，与 MongoDB 6.0 社区版完全兼容。

     MongoDB 6.0 社区版的全部新特性和改进详见发布说明：https://www.mongodb.com/docs/v6.0/release-notes/6.0/。
  upgradeDescription: |
    升级 mongodb 至版本 6.0.21

    提供的 bug 修复，包括在 Percona Server for MongoDB 中，如下所示：
    - SERVER-94405 - 在降级到版本 5.0.x 并设置功能兼容版本 (FCV) 为 5.0 时，重新启用会话集合的自动拆分
    - SERVER-96252 - 在设置范围删除任务和没有哈希分片键索引时，设置孤立文档的数量为零，修复了升级到新 FCV 时的问题
    - SERVER-98720 - 添加了 BSON 命令的重写，以防止整个命令文本（可能包括 PII）进入日志
    - SERVER-100594 - 限制 JSON 递归为 200 级
    - SERVER-101298 - 在压缩时删除数据库和集合锁的获取
    - SERVER-97842 - 修复了 MongoDB CPU 使用率在 RHEL 9 上使用新版 OpenSSL 时激增的问题

    完整变更内容请见：https://www.mongodb.com/docs/v6.0/release-notes/6.0-changelog/#6.0.21-changelog

    变更日志
    新增特性：
    - PSMDB-1282 - 添加 security.kmip.useLegacyProtocol 配置文件选项，简化从 MongoDB Enterprise Edition 到 Percona Server for MongoDB 的迁移
    
    改进：
    - PSMDB-1620 - 如果日志目标不是文件，则不创建空审计日志文件
    - PSMDB-1621 - 检查是否可以在默认路径打开审计日志文件以进行写入

    错误修复：
    - PSMDB-118 - 根据指定的审计日志格式创建审计日志文件扩展名
    - PSMDB-121 - 修复了服务器在进程 fork 时无法在用户提供的路径创建审计日志文件的问题
    - PSMDB-1227 - 允许在 LDAP 查询的属性部分设置 Distinguished Name(DN) 值
    - PSMDB-1392 - 确保 $backupCursor 返回 oplogEnd 而不出现空洞（感谢 MingTotti Guoming He 报告此问题）
    - PSMDB-1614 - 在 percona-server-enable-authentication.sh 中用占位符替换硬编码的端口号
    - PSMDB-1617 - 当缺乏访问客户端/CA 证书的权限时，改进错误消息

    完整的 Percona Server for MongoDB 发布说明请见：https://docs.percona.com/percona-server-for-mongodb/6.0/release_notes/6.0.21-18.html

    