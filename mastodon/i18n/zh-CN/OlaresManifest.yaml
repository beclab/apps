metadata:
  description: 您自托管的、全球互联的微博社区
  title: Mastodon
spec:
  fullDescription: |
    Mastodon 是一个自由开源的社交网络服务平台，支持 ActivityPub 协议，用户可以方便地关注朋友或发现新朋友。

    用户在 Mastodon 上可以自由发布各种内容，包括链接、图片、文字和视频。所有 Mastodon 服务器通过一个联合网络互联互通，这意味着不同服务器的用户可以轻松交流，甚至包括其他支持 ActivityPub 协议的非 Mastodon 软件！

    功能亮点
    * 开放互通：完全兼容任何遵循相同标准的平台
    > 只要是支持 ActivityPub 协议的，都可以加入这一社交网络。

    * 实时更新：按时间顺序实时更新动态
    > 关注的动态会通过 WebSockets 实时在用户界面中更新。同时提供全局视角的显示方式！

    * 支持多种媒体附件，如图片和短视频
    > 用户可以上传和查看动态中的图片和 WebM/MP4 视频。无声视频将作为 GIF 处理，而有声视频则持续循环播放！

    * 安全与管理工具全面
    > Mastodon 提供私密发布、账户锁定、内容过滤、静音、屏蔽等多种功能，以及完善的举报与管理系统。

    * 支持 OAuth2 及简洁的 REST API
    > 作为 OAuth2 服务提供者，Mastodon 允许第三方应用通过 REST 和 Streaming API 接入。这样的设计使得应用生态丰富，用户有更多选择！

  upgradeDescription: |
    # 升级概述
    
    重要提示：此版本需要重新编译资源文件。
    
    如果您从较早版本（4.5.2 之前）直接升级，请仔细阅读跳过的版本的升级说明，因为它们通常需要额外的步骤，如数据库迁移。特别是，阅读 4.5.0 的发布说明非常重要。
    
    # 更新日志
    
    ## 安全修复
    * 修复不一致的错误处理导致私有帖子存在信息泄露的问题 (GHSA-gwhw-gcjx-72v8)
    
    ## 问题修复
    * 修复在某些情况下，非引用帖子的删除并重新起草被当作引用帖子处理的问题
    * 通过发送 referer 修复 YouTube 嵌入
    * 修复流式引用投票未正确水合的问题
    * 修复创建重复对话的问题
    * 修复外部链接中多余的 noreferrer 属性
    * 修复某些数据库迁移中的边缘情况错误处理
    * 修复重新获取已知状态时的错误处理
    * 修复启用高级 UI 时单列模式下的帖子导航问题
    * 修复 tootctl status remove 删除引用帖子和本地帖子的远程引用的问题
    * 修复已知的昂贵 S3 批量删除操作因超时时间过短而失败的问题
    * 修复撰写自动建议总是将输入标记小写的问题
    
    # 升级说明
    
    ## 依赖要求
    自 v4.5.0 以来，外部依赖项未发生变化：
    * Ruby: 3.2 或更新版本
    * PostgreSQL: 14 或更新版本
    * Elasticsearch（推荐）: 7.x（OpenSearch 也应该可以工作）
    * LibreTranslate（可选）: 1.3.3 或更新版本
    * Redis: 7.0 或更新版本
    * Node: 20.19 或更新版本
    * libvips（可选）: 8.13 或更新版本
    * ImageMagick（如果使用 libvips 则为可选）: 6.9.7-7 或更新版本
    
    ## 更新步骤（从 4.5.2 升级）
    
    ### 非 Docker 部署
    1. 预编译资源文件：RAILS_ENV=production bundle exec rails assets:precompile
    2. 重启所有 Mastodon 进程。
    
    ### Docker 部署
    1. 重启所有 Mastodon 进程。
    
    注意：与往常一样，在执行任何升级之前，请确保已备份数据库。
    
    完整的发布说明见：https://github.com/mastodon/mastodon/releases/tag/v4.5.3
