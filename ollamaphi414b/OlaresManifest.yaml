---
olaresManifest.version: '0.10.0'
olaresManifest.type: app

metadata:
  name: ollamaphi414b
  icon: https://app.cdn.olares.com/appstore/llm/ollama/llm/phi4-14b.png
  description: Phi-4 is a 14B parameter, state-of-the-art open model from Microsoft.
  appid: ollamaphi414b
  title: Phi-4 14B (Ollama)
  version: '1.1.9'
  categories:
    - AI

entrances:
  - name: ollamaclient
    port: 8081
    host: ollamaclient
    title: Phi-4 14B
    icon: https://app.cdn.olares.com/appstore/llm/ollama/llm/phi4-14b.png
    openMethod: default
    authLevel: internal

spec:
  versionName: 'phi4:14b-q4_K_M'
  fullDescription: |
    ## IMPORTANT NOTE ##
    This is a shared app. Once installed by the Olares Admin, all users in the cluster can use it through reference app.

    ## MODEL OVERVIEW ##
    Phi-4 is a 14B parameter, state-of-the-art open model built upon a blend of synthetic datasets, data from filtered public domain websites, and acquired academic books and Q&A datasets.

    The model underwent a rigorous enhancement and alignment process, incorporating both supervised fine-tuning and direct preference optimization to ensure precise instruction adherence and robust safety measures.
    Context length: 16k tokens

    # Primary use cases
    The model is designed to accelerate research on language models, for use as a building block for generative AI powered features. It provides uses for general purpose AI systems and applications (primarily in English) which require:
    - Memory/compute constrained environments.
    - Latency bound scenarios.
    - Reasoning and logic.

  developer: Microsoft
  sourceCode: https://huggingface.co/microsoft/phi-4
  submitter: Olares
  locale:
    - en-US
    - zh-CN
  license:
    - text: MIT
      url: https://ollama.com/library/phi4:14b/blobs/fa8235e5b48f

  {{- if and .Values.admin .Values.bfl.username (eq .Values.admin .Values.bfl.username) }}
  limitedCpu: 6200m
  requiredCpu: 150m
  requiredDisk: 50Mi
  limitedDisk: 500Gi
  limitedMemory: 40Gi
  requiredMemory: 4200Mi
  requiredGpu: 0
  limitedGpu: 16Gi
  {{- else }}
  requiredMemory: 64Mi
  limitedMemory: 800Mi
  requiredDisk: 50Mi
  limitedDisk: 200Mi
  requiredCpu: 10m
  limitedCpu: 800m
  {{- end }}
  supportArch:
    - amd64
    - arm64

permission:
  appData: true
  appCache: true
  userData:
    - Home/Ollama
options:
  apiTimeout: 0
  appScope:
  {{- if and .Values.admin .Values.bfl.username (eq .Values.admin .Values.bfl.username) }}
    clusterScoped: true
    appRef:
      - ollamaphi414b
  {{- else }}
    clusterScoped: false
  {{- end }}
  dependencies:
    - name: olares
      version: '>=1.12.2-0'
      type: system
  {{- if and .Values.admin .Values.bfl.username (eq .Values.admin .Values.bfl.username) }}
  {{- else }}
    - name: ollamaphi414b
      type: application
      version: '>=1.1.3'
      mandatory: true
  {{- end }}

provider:
- name: ollamaphi414b
  entrance: ollamaclient
  paths: ["/*"]
  verbs: ["*"]