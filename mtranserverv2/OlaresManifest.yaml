---
olaresManifest.version: '0.10.0'
olaresManifest.type: app
apiVersion: 'v2'
metadata:
  name: mtranserverv2
  description: 'A high-performance offline translation server with minimal resource requirements'
  icon: https://app.cdn.olares.com/appstore/mtranserver/icon.png
  appid: mtranserverv2
  version: '1.0.2'
  title: MTranServer
  categories:
    - Productivity_v112
    - Productivity

permission:
  appData: true
  appCache: true

spec:
  versionName: 3.1.11
  featuredImage: https://app.cdn.olares.com/appstore/mtranserver/1.webp
  promoteImage:
    - https://app.cdn.olares.com/appstore/mtranserver/1.webp
  fullDescription: |
    MTranServer is a high-performance offline translation server with minimal resource requirements.

    It runs on CPU with just 1GB memory, no GPU needed. Average response time of 50ms per request. Supports translation of major languages worldwide.

    Translation quality comparable to Google Translate.

    Note: This model focuses on speed and private deployment on various devices, so the translation quality will not match that of large language models.For high-quality translation, consider using online large language model APIs.
  upgradeDescription: |
    Change to version 3.1.11
    Adapted to the full range of AMD64 architectures, now supports x86-64 CPU deployment of all architectures
  developer: xxnuo
  website: https://github.com/xxnuo/MTranServer
  sourceCode: https://github.com/xxnuo/MTranServer
  submitter: Olares
  doc: https://mtranserver.2020818.xyz/en/guide/index.html
  license:
    - text: Apache-2.0
      url: https://github.com/xxnuo/MTranServer?tab=Apache-2.0-1-ov-file
  locale:
    - en-US
    - zh-CN

  {{- if and .Values.admin .Values.bfl.username (eq .Values.admin .Values.bfl.username) }}
  requiredMemory: 6000Mi
  limitedMemory: 20Gi
  requiredDisk: 1Gi
  limitedDisk: 10Gi
  requiredCpu: 500m
  limitedCpu: 5
  {{- else }}
  requiredMemory: 64Mi
  limitedMemory: 256Mi
  requiredDisk: 1Mi
  limitedDisk: 100Mi
  requiredCpu: 10m
  limitedCpu: 100m
  {{- end }}

  supportArch:
    - amd64
    - arm64
  subCharts:
  - name: mtranserverv2server
    shared: true
  - name: mtranserverv2
options:
  allowedOutboundPorts:
    - 8989
  dependencies:
    - name: olares
      version: '>=1.12.3-0'
      type: system
{{- if and .Values.admin .Values.bfl.username (eq .Values.admin .Values.bfl.username) }}
{{- else }}
    - name: mtranserverv2
      type: application
      version: '>=1.0.1'
      mandatory: true
{{- end }}
  appScope:
{{- if and .Values.admin .Values.bfl.username (eq .Values.admin .Values.bfl.username) }}
    clusterScoped: true
    appRef:
      - mtranserverv2
{{- else }}
    clusterScoped: false
{{- end }}

sharedEntrances:
  - name: mtranserverv2
    title: MTranServer API
    host: sharedentrances-api
    icon: https://app.cdn.olares.com/appstore/mtranserver/icon.png
    port: 0
    invisible: true
    authLevel: internal

entrances:
  - authLevel: internal
    host: mtranserverweb
    icon: https://app.cdn.olares.com/appstore/mtranserver/icon.png
    name: mtranserver
    openMethod: window
    port: 8080
    title: MTranServer API
    invisible: true
