olaresManifest.version: '0.10.0'
olaresManifest.type: app
metadata:
  name: onlyoffice
  description: Run your private office with the ONLYOFFICE
  icon: https://app.cdn.olares.com/appstore/onlyoffice/icon.png
  appid: onlyoffice
  version: '1.0.10'
  title: OnlyOffice
  categories:
  - Productivity_v112
  - Productivity
permission:
  appData: true
  appCache: true
  userData:
  - Home
spec:
  versionName: '9.2.0'
  featuredImage: https://app.cdn.olares.com/appstore/onlyoffice/1.png
  promoteImage:
  - https://app.cdn.olares.com/appstore/onlyoffice/1.png
  - https://app.cdn.olares.com/appstore/onlyoffice/2.png
  - https://app.cdn.olares.com/appstore/onlyoffice/3.png
  - https://app.cdn.olares.com/appstore/onlyoffice/4.png
  fullDescription: |
    ONLYOFFICE Docs is a free collaborative online office suite comprising viewers and editors for texts, spreadsheets and presentations, forms and PDF, fully compatible with Office Open XML formats: .docx, .xlsx, .pptx and enabling collaborative editing in real time.

    # IMPORTANT NOTE
    When starting ONLYOFFICE for the first time, navigate to ControlHub. In the onlyoffice pod, open the terminal of the 'onlyoffice' container. Enter the command `supervisorctl start ds:example`. Then, return to the welcome page and click on 'go to test example' to try it out.

    ONLYOFFICE Docs includes the following editors:
    # ONLYOFFICE Document Editor
    # ONLYOFFICE Spreadsheet Editor
    # ONLYOFFICE Presentation Editor
    # ONLYOFFICE Form Creator
    # ONLYOFFICE PDF editor, reader & converter

    The editors allow you to create, edit, save and export text, spreadsheet and presentation documents and additionally have the features:
    # Collaborative editing
    # Hieroglyph support
    # Reviewing
    # Spell-checking

  upgradeDescription: |
    Upgrade to 9.2.0
    View full changelog at: https://github.com/ONLYOFFICE/DocumentServer/blob/master/CHANGELOG.md#920

    What's new in 9.2.0
    New Features
    # All Editors
    Added the ability to customize keyboard shortcuts
    Added the ability to record some executed actions as a macro in all editors, except for PDF
    
    # Presentation Editor
    Implemented insertion of equations from a third-party resource
    
    # Forms
    Implemented the ability to select the role for which new fields will be added
    Implemented the ability to add labels for checkboxes and radio buttons. In the filling mode, clicking on the label works like clicking on the checkbox itself
    
    # PDF Editor
    Added the ability to change color for hidden text (Redact)
    Implemented insertion of equations from a third-party resource
    
    # Security
    Updated Redis to versions not affected by the CVE-2025-49844 vulnerability
    Fixed the vulnerability which allows adding a named range in the protected workbook via websocket
    Fixed the XSS vulnerability in the denyEditingRights
    Fixed the vulnerabilities in linux-libc-dev which allow escalating privileges in the system and stealing data from hypervisor processes (CVE-2025-38352, CVE-2025-40300)
    
    # Back-end
    Improved the appearance of the sidebar and added icons to the Admin Panel

    # API
    Added methods for getting and setting text for checkboxes and radio buttons
    Added methods for working with the numerical identifier of a paragraph, which is saved in the file
    Added a method for deleting a form from the document with the ability to save the content, similar to the method for Content Control
    Added a method for getting forms
    The GetAllContentControls method, which returns a Content Control, no longer returns forms
    Added the onParagraphText event, indicating that the paragraph content was changed, with the following json object:
    Added events for working with annotations:

    # Plugins
    Added Grammar & Spelling check in the Document and Form Editors in the AI plugin
      
  developer: ONLYOFFICE
  website: https://www.onlyoffice.com/
  sourceCode: https://github.com/ONLYOFFICE/DocumentServer
  submitter: Olares
  locale:
  - en-US
  - zh-CN
  doc: https://helpcenter.onlyoffice.com/index.aspx
  license:
  - text: AGPL-3.0
    url: https://github.com/ONLYOFFICE/DocumentServer?tab=AGPL-3.0-1-ov-file#readme
  {{- if and .Values.admin .Values.bfl.username (eq .Values.admin .Values.bfl.username) }}
  requiredMemory: 800Mi
  requiredDisk: 50Mi
  requiredCpu: 1
  limitedMemory: 9.5Gi
  limitedCpu: 4
  onlyAdmin: true
  {{- else }}
  requiredMemory: 64Mi
  limitedMemory: 256Mi
  requiredDisk: 1Mi
  limitedDisk: 100Mi
  requiredCpu: 10m
  limitedCpu: 100m
  {{- end }}
  supportArch:
  - amd64
  - arm64
options:
  dependencies:
  - name: olares
    type: system
    version: '>=1.11.6-0'
{{- if and .Values.admin .Values.bfl.username (eq .Values.admin .Values.bfl.username) }}
{{- else}}
  - name: onlyoffice
    type: application
    version: '>=1.0.2'
    mandatory: true
{{- end }}
  appScope:
{{- if and .Values.admin .Values.bfl.username (eq .Values.admin .Values.bfl.username) }}
    clusterScoped: true
    appRef:
    - files
    - onlyoffice
{{- else}}
    clusterScoped: false
{{- end }}
entrances:
- name: onlyofficeproxy
  host: onlyofficeproxy
  port: 8080
  title: OnlyOffice
  icon: https://app.cdn.olares.com/appstore/onlyoffice/icon.png
  authLevel: internal
  openMethod: window
middleware:
{{- if and .Values.admin .Values.bfl.username (eq .Values.admin .Values.bfl.username) }}
  postgres:
    username: onlyoffice
    password: onlyoffice
    databases:
    - name: onlyoffice
      distributed: true
  redis:
    namespace: db0
{{- end }}
