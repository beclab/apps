# Bluesky PDS Configuration
# 参考官方配置: https://github.com/bluesky-social/pds/blob/main/compose.yaml

hostname: ""
port: 3000
dataDirectory: /pds
blobstoreDiskLocation: /pds/blocks

# Environment file configuration
# 如果 PDS 镜像需要从文件读取环境变量（env_file），设置 mountAsFile: true
envFile:
  enabled: true
  mountAsFile: false  # 如果镜像启动脚本中有 source /pds/pds.env，设置为 true

# Environment variables
env:
  # Required: PDS_HOSTNAME (set from hostname above)
  # Optional: PDS_JWT_SECRET (default: "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6")
  # Optional: PDS_ADMIN_PASSWORD (default: "admin1234567890")
  # Optional: PDS_PLC_ROTATION_KEY_K256_PRIVATE_KEY_HEX (default: "0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef" - 64 hex characters)
  # 
  # ⚠️ 重要：如果遇到 "Non-base16 character" 错误，请手动生成密钥：
  # openssl rand -hex 32  # 生成 64 个十六进制字符
  # 然后将生成的密钥设置到下面的变量中
  
  # Optional: Email configuration
  PDS_EMAIL_SMTP_URL: ""
  PDS_EMAIL_FROM_ADDRESS: ""
  
  # Optional: Privacy policy URL
  PDS_PRIVACY_POLICY_URL: ""
  
  # Optional: Logging
  LOG_ENABLED: "true"
  LOG_LEVEL: "info"
  LOG_DESTINATION: ""
  
  # Optional: Rate limits
  PDS_RATE_LIMITS_ENABLED: "true"
  
  # Optional: Blob upload limit (default: 5MB)
  PDS_BLOB_UPLOAD_LIMIT: "5242880"
  
  # Optional: Service URLs (defaults to Bluesky official)
  PDS_DID_PLC_URL: "https://plc.directory"
  PDS_BSKY_APP_VIEW_URL: "https://api.bsky.app"
  PDS_BSKY_APP_VIEW_DID: "did:web:api.bsky.app"
  PDS_REPORT_SERVICE_URL: "https://mod.bsky.app"
  PDS_REPORT_SERVICE_DID: "did:plc:ar7c4by46qjdydhdevvrndac"
  PDS_CRAWLERS: "https://bsky.network"
