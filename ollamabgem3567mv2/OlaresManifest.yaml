---
olaresManifest.version: '0.10.0'
olaresManifest.type: app
apiVersion: 'v2'
metadata:
  name: ollamabgem3567mv2
  icon: https://app.cdn.olares.com/appstore/llm/ollama/embedding/bge-m3.png
  description: One-Stop Retrieval Toolkit For Search and RAG
  appid: ollamabgem3567mv2
  title: BGE-M3 (Ollama)
  version: '1.0.11'
  categories:
    - AI
sharedEntrances:
  - name: ollamabgem3567mv2
    host: sharedentrances-api
    port: 0
    tile: BGE-M3
    invisible: true
    authLevel: internal
    icon: https://app.cdn.olares.com/appstore/llm/ollama/embedding/bge-m3.png
entrances:
  - name: ollamaclient
    port: 8080
    host: ollamaclient
    title: BGE-M3
    authLevel: internal
    icon: https://app.cdn.olares.com/appstore/llm/ollama/embedding/bge-m3.png
    openMethod: window
spec:
  versionName: 'bge-m3:567m-fp16'
  fullDescription: |
    ## IMPORTANT NOTE ##
    This is a shared app. Once installed by the Olares Admin, all users in the cluster can use it through reference app.

    ## MODEL OVERVIEW ##
    BGE-M3 is based on the XLM-RoBERTa architecture and is distinguished for its versatility in Multi-Functionality, Multi-Linguality, and Multi-Granularity:
    - Multi-Functionality: It can simultaneously perform the three common retrieval functionalities of embedding model: dense retrieval, multi-vector retrieval, and sparse retrieval.
    - Multi-Linguality: It can support more than 100 working languages.
    - Multi-Granularity: It is able to process inputs of different granularities, spanning from short sentences to long documents of up to 8192 tokens.

    # Model Details
    - Model Name: BAAI/bge-m3
    - Parameters: 567m
    - Dimension: 1024
    - Sequence Length: 8192

  developer: BAAI
  website: https://bge-model.com/bge/bge_m3.html
  sourceCode: https://huggingface.co/BAAI/bge-m3
  submitter: Olares
  locale:
    - en-US
    - zh-CN
  doc: https://bge-model.com/bge/bge_m3.html
  license:
    - text: MIT
      url: https://ollama.com/library/bge-m3:567m/blobs/a406579cd136

  {{- if and .Values.admin .Values.bfl.username (eq .Values.admin .Values.bfl.username) }}
  limitedCpu: 6200m
  requiredCpu: 150m
  requiredDisk: 50Mi
  limitedDisk: 500Gi
  limitedMemory: 33Gi
  requiredMemory: 4200Mi
  requiredGpu: 0
  limitedGpu: 16Gi
  {{- else }}
  requiredMemory: 64Mi
  limitedMemory: 800Mi
  requiredDisk: 50Mi
  limitedDisk: 200Mi
  requiredCpu: 10m
  limitedCpu: 800m
  {{- end }}

  supportArch:
    - amd64
    - arm64
  subCharts:
  - name: ollamabgem3567mv2server
    shared: true
  - name: ollamabgem3567mv2
permission:
  appData: true
  appCache: true
  userData:
    - Home/Ollama
options:
  apiTimeout: 0
  appScope:
  {{- if and .Values.admin .Values.bfl.username (eq .Values.admin .Values.bfl.username) }}
    clusterScoped: true
    appRef:
      - ollamabgem3567mv2
  {{- else }}
    clusterScoped: false
  {{- end }}
  dependencies:
    - name: olares
      version: '>=1.12.3-0'
      type: system
  {{- if and .Values.admin .Values.bfl.username (eq .Values.admin .Values.bfl.username) }}
  {{- else }}
    - name: ollamabgem3567mv2
      type: application
      version: '>=1.0.1'
      mandatory: true
  {{- end }}
{{- if and .Values.admin .Values.bfl.username (eq .Values.admin .Values.bfl.username) }}
envs:
  - envName: KEEP_ALIVE
    required: false
    type: bool
    editable: true
    applyOnChange: true
    default: "true"
{{- end }}